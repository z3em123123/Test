<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ø¹Ø¯ ØªÙ†Ø§Ø²Ù„ÙŠ Ù…Ø¹ Embed ÙˆÙŠØ¨Ù‡ÙˆÙƒ</title>
  <style>
    body {
      font-family: Tahoma, sans-serif;
      text-align: center;
      background: #f8f9fa;
      padding: 40px;
    }
    h1 { color: #333; }
    input, button {
      padding: 8px;
      margin: 6px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 1em;
    }
    button {
      background: #28a745;
      color: white;
      cursor: pointer;
    }
    button:hover { background: #218838; }
    #timer {
      margin-top: 30px;
      font-size: 2em;
      color: #d62828;
    }
  </style>
</head>
<body>
  <h1>â³ Ù…Ø¤Ù‚Øª Ø¹Ø¯ ØªÙ†Ø§Ø²Ù„ÙŠ (Embed ÙÙŠ Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯)</h1>

  <div>
    <label>Ø£ÙŠØ§Ù…:</label>
    <input type="number" id="daysInput" value="0"><br>

    <label>Ø³Ø§Ø¹Ø§Øª:</label>
    <input type="number" id="hoursInput" value="0"><br>

    <label>Ø¯Ù‚Ø§Ø¦Ù‚:</label>
    <input type="number" id="minutesInput" value="0"><br>

    <label>Ø«ÙˆØ§Ù†ÙŠ:</label>
    <input type="number" id="secondsInput" value="30"><br><br>

    <label>Ø±Ø§Ø¨Ø· Ø§Ù„ÙˆÙŠØ¨Ù‡ÙˆÙƒ (Discord):</label><br>
    <input type="text" id="webhookInput" placeholder="https://discord.com/api/webhooks/..."><br><br>

    <button onclick="startCountdown()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ</button>
  </div>

  <div id="timer"></div>

  <script>
    let countdown;
    let messageId = null;
    let webhookBase = null;

    async function startCountdown() {
      const days = parseInt(document.getElementById("daysInput").value) || 0;
      const hours = parseInt(document.getElementById("hoursInput").value) || 0;
      const minutes = parseInt(document.getElementById("minutesInput").value) || 0;
      const seconds = parseInt(document.getElementById("secondsInput").value) || 0;
      const webhookURL = document.getElementById("webhookInput").value;
      const timerEl = document.getElementById("timer");

      if (!webhookURL) {
        alert("Ø±Ø¬Ø§Ø¡Ù‹ Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ÙˆÙŠØ¨Ù‡ÙˆÙƒ");
        return;
      }

      webhookBase = webhookURL.split("/messages")[0];
      let totalSeconds = (days * 86400) + (hours * 3600) + (minutes * 60) + seconds;

      clearInterval(countdown);

      // Ø¥Ø±Ø³Ø§Ù„ Ø£ÙˆÙ„ Embed
      const firstMsg = await fetch(webhookURL + "?wait=true", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          embeds: [{
            title: "â³ Countdown",
            description: "Starting countdown...",
            color: 0x3498db // Ø£Ø²Ø±Ù‚
          }]
        })
      }).then(r => r.json());

      messageId = firstMsg.id;

      countdown = setInterval(() => {
        let d = Math.floor(totalSeconds / 86400);
        let h = Math.floor((totalSeconds % 86400) / 3600);
        let m = Math.floor((totalSeconds % 3600) / 60);
        let s = totalSeconds % 60;

        const msg = `${d} Days , ${h} Hours , ${m} Minutes , ${s} Seconds`;
        timerEl.textContent = msg;

        // ØªØ¹Ø¯ÙŠÙ„ Ù†ÙØ³ Ø§Ù„Ø±Ø³Ø§Ù„Ø© ÙƒÙ€ Embed
        fetch(`${webhookBase}/messages/${messageId}`, {
          method: "PATCH",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            embeds: [{
              title: "â³ Countdown",
              description: msg,
              color: 0xe67e22 // Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ
            }]
          })
        }).catch(console.error);

        totalSeconds--;

        if (totalSeconds < 0) {
          clearInterval(countdown);
          timerEl.textContent = "â³ Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø¹Ø¯!";
          fetch(`${webhookBase}/messages/${messageId}`, {
            method: "PATCH",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              embeds: [{
                title: "â³ Countdown Finished!",
                description: "ğŸ‰ Ø§Ù„ÙˆÙ‚Øª Ø§Ù†ØªÙ‡Ù‰!",
                color: 0x2ecc71 // Ø£Ø®Ø¶Ø±
              }]
            })
          }).catch(console.error);
        }
      }, 1000);
    }
  </script>
</body>
</html>
